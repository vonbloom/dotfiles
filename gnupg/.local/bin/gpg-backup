#!/bin/sh

secret_file=secret.asc
trust_file=trust.txt
tmp_path=/tmp/gpg_backup
output=gnupg_backup.tar.gz

mkdir "$tmp_path"

echo "Exporting secret keys and owner trust..."
gpg --export-secret-keys --armor > "$tmp_path/$secret_file"
gpg --export-ownertrust > "$tmp_path/$trust_file"

echo "Packaging files..."
tar -cPzvf "$output" "$tmp_path"

echo "Cleaning temp files..."
rm -rf "$tmp_path"

echo "Your backup is at $output"
